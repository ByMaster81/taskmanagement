<!DOCTYPE html>
<html lang="tr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeamTask Projesi</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        body { padding-top: 2rem; padding-bottom: 2rem; }
        
        main.container {
            max-width: 1280px; 
        }
        .hidden { display: none; }
        .error { color: var(--pico-color-red-500); margin-top: 0.5rem; }
        header { display: flex; justify-content: space-between; align-items: center; }
        ul li, td { padding: 1rem; }
        ul li { background-color: var(--card-background-color); border-radius: var(--border-radius); margin-bottom: 0.75rem; }
        form { display: flex; flex-direction: column; gap: 1rem; }
    </style>
</head>
<body>
    <main class="container">

        <!-- GÖRÜNÜM 1: GİRİŞ EKRANI -->
        <article id="auth-view">
            <!-- Giriş Formu -->
            <form id="login-form">
                <hgroup>
                    <h2>Giriş Yap</h2>
                    <p>Devam etmek için giriş yapın.</p>
                </hgroup>
                <input type="email" name="email" placeholder="E-posta Adresi" required>
                <input type="password" name="password" placeholder="Şifre" required>
                <p id="login-error" class="error hidden"></p>
                <button type="submit">Giriş Yap</button>
                <!--<small>Hesabınız yok mu? <a href="#" id="show-register-link">Kayıt Olun</a></small> -->
            </form>
            
            <!-- Kayıt Formu (Başlangıçta gizli) -->
            <form id="register-form" class="hidden">
                <hgroup>
                    <h2>Kayıt Ol</h2>
                    <p>Yeni bir hesap oluşturun.</p>
                </hgroup>
                <input type="text" name="name" placeholder="İsim Soyisim" required>
                <input type="email" name="email" placeholder="E-posta Adresi" required>
                <input type="password" name="password" placeholder="Şifre" required>
                <p id="register-error" class="error hidden"></p>
                <button type="submit">Kayıt Ol</button>
                <small>Zaten bir hesabınız var mı? <a href="#" id="show-login-link">Giriş Yapın</a></small>
            </form>
        </article>

        <!-- GÖRÜNÜM 2: ADMİN PANOSU -->
        <article id="admin-dashboard-view" class="hidden">
        <header>
            <hgroup>
                <h2>Admin Panosu</h2>
                <p>Yönetim araçlarını ve veri listelerini açmak için başlıklara tıklayın.</p>
            </hgroup>
            <button id="admin-logout-btn" class="secondary outline">Çıkış Yap</button>
        </header>

        <!-- 1. BÖLÜM: YÖNETİM FORMLARI -->
        <h3>Yönetim Araçları</h3>
        
        <!-- Yeni Kullanıcı Oluşturma (Açılır-Kapanır) -->
        <details>
            <summary role="button" class="secondary">Yeni Kullanıcı Oluştur</summary>
            <form id="create-user-form">
                <input type="text" name="name" placeholder="İsim Soyisim" required>
                <input type="email" name="email" placeholder="E-posta Adresi" required>
                <input type="password" name="password" placeholder="Geçici Şifre" required>
                <label for="role-select">Rol Seç</label>
                <select id="role-select" name="role">
                    <option value="USER">Standart Kullanıcı (USER)</option>
                    <option value="ADMINUSER">Admin (ADMINUSER)</option>
                </select>
                <button type="submit">Kullanıcıyı Oluştur</button>
            </form>
        </details>

        <!-- Yeni Görev Oluşturma (Açılır-Kapanır) -->
        <details>
            <summary role="button" class="secondary">Yeni Görev Oluştur</summary>
            <form id="create-task-form">
                <input type="text" name="title" placeholder="Görev Başlığı" required>
                <textarea name="description" placeholder="Görev Açıklaması"></textarea>
                <button type="submit">Görevi Oluştur</button>
            </form>
        </details>

        <!-- Görev Atama (Açılır-Kapanır) -->
        <details>
            <summary role="button" class="secondary">Görev Ata</summary>
            <form id="assign-task-form">
                <label for="user-select">Kullanıcı Seç</label>
                <select id="user-select" name="userId" required>
                    <option value="">Yükleniyor...</option>
                </select>
                <label for="task-select">Görev Seç</label>
                <select id="task-select" name="taskId" required>
                    <option value="">Yükleniyor...</option>
                </select>
                <button type="submit">Görevi Ata</button>
            </form>
        </details>

        <hr>

        <!-- 2. BÖLÜM: VERİ LİSTELERİ -->
        <h3>Veri Listeleri</h3>

        <!-- Tüm Kullanıcılar (Açılır-Kapanır) -->
        <details open> <!-- 'open' attribute'ü başlangıçta açık gelmesini sağlar -->
            <summary role="button">Tüm Kullanıcılar</summary>
            <figure>
                <table role="grid" id="admin-user-table">
                    <!-- ... tablo başlıkları aynı ... -->
                    <tbody id="admin-user-list"></tbody>
                </table>
            </figure>
        </details>
        
        <!-- Tüm Atamalar (Açılır-Kapanır) -->
        <details open>
            <summary role="button">Tüm Atamalar</summary>
            <figure>
                <table role="grid" id="admin-assignment-table">
                    <!-- ... tablo başlıkları aynı ... -->
                    <tbody id="admin-assignment-list"></tbody>
                </table>
            </figure>
        </details>

    </article> <!-- Admin Panosu Bitişi -->

        
        <article id="user-dashboard-view" class="hidden">
            <header>
                <hgroup>
                    <h2>Görevlerim</h2>
                    <p>Size atanmış olan tüm görevler listeleniyor.</p>
                </hgroup>
                <button id="user-logout-btn" class="secondary outline">Çıkış Yap</button>
            </header>
            <ul id="user-task-list"></ul>
        </article>

    </main>

    <script src="app.js"></script>
</body>
</html>